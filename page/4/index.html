<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1"><link href=/css/fonts.css rel=stylesheet type=text/css><title>Popstas</title><link rel=stylesheet href=/css/hugo-octopress.css><link rel=stylesheet href=https://blog.popstas.ru/css/custom.css><link rel=stylesheet href=/css/fork-awesome.min.css><link href=https://blog.popstas.ru/favicon.png rel=icon><link href=http://feeds.feedburner.com/popstas rel=alternate type=application/rss+xml title=RSS><meta name=description content><meta name=keywords content><meta name=author content="Stanislav Popov"><meta name=generator content="Hugo 0.66.0"></head><body><header role=banner><hgroup><div><a href=https://blog.popstas.ru/>Popstas</a></div><div>Записки о Linux</div></hgroup></header><nav role=navigation><fieldset class=mobile-nav><select onchange="location=this.value;">
<option value>Navigate…</option></select></fieldset><ul class=main-navigation></ul><ul class=subscription><a href=http://feeds.feedburner.com/popstas target=_blank type=application/rss+xml title=RSS><i class="fa fa-rss-square fa-lg"></i></a></ul><form action=https://www.google.com/search method=get target=_blank><fieldset role=search><input class=search type=text name=q results=0 placeholder="Поискать в Google">
<input type=hidden name=q value=site:https://blog.popstas.ru/></fieldset></form></nav><div id=main><div id=content><div class=blog-index><article><header><p class=meta>13.03.2017, 00:30
- 2 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2017/03/13/python-highlight-syntax-in-phpstorm/>Подсветка Python синтаксиса в PhpStorm</a></div></header><p><p>Я долго терпел, но сегодня решил выяснить: можно ли добавить поддержку Python в PhpStorm.</p><p>Оказалось, что можно и делается хоть и не за минуту, а за 5-10 минут.</p><p>Tl;dr: можно сделать только подсветку, Solarized Dark нельзя.
<a href=https://confluence.jetbrains.com/display/PhpStorm/TextMate+Bundles+in+PhpStorm>Официальная документация</a></p><img itemprop=image src=/images/2017-03/phpstorm-python.gif></p><footer><a href=https://blog.popstas.ru/blog/2017/03/13/python-highlight-syntax-in-phpstorm/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>09.03.2017, 08:00
- 7 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2017/03/09/ansible-role-zsh-powerlevel9k-fzf-syntax-autosuggestions/>ansible-role-zsh: zsh терминал с autosuggestions, fzf и красивым удобным prompt</a></div></header><p><p>Репост <a href=https://habrahabr.ru/post/323496/>моей статьи с хабра</a>.</p><p>Я провожу в терминале много времени, поэтому хочется, чтобы все было красиво, быстро и удобно.
Из этого рождается постоянное желание его настраивать, пробовать разные плагины.
Шеллом я выбрал для себя zsh лет 5 назад, пару лет назад нашел oh-my-zsh для его удобной настройки.
Со временем к этому конфигу добавились некоторые сбоку торчащие части в виде powerline и percol.</p><p>Недавно я решил пересобрать все так, чтобы избавиться от ненужных плагинов, добавить нужные, сделать легкую установку
и обновление. В итоге появилась роль <a href=https://github.com/viasite-ansible/ansible-role-zsh>ansible-role-zsh</a>,
которая полностью настраивает терминалы на локалке и на моих серверах.</p><h3 id=особенности>Особенности:</h3><ul><li>устанавливается одной командой (кроме шрифта и темы вашего терминального клиента)</li><li>быстро загружается, быстро работает</li><li>полностью настраивается через ansible, <code>~/.zshrc</code></li><li>полностью локальная (в систему ничего не ставится, все хранится в <code>~/.oh-my-zsh</code>)</li><li>оставляет возможность юзеру вносить свои настройки через <code>~/.zshrc.local</code></li><li><del>одинаково</del> работает на macOS, старом Debian, Ubuntu, CentOS</li><li>нормально выглядит на разных цветовых схемах (но лучше всего на Solarized Dark)</li><li>встроенная подсветка синтаксиса (помогает реже ошибаться и лучше читать длинные команды)</li><li>автодополнение по истории команд (помогает реже нажимать <code>Ctrl+R</code>)</li><li>отображение времени для долго выполняемых команд (помогает реже использовать <code>time</code>)</li></ul><p>Демонстрация фич за 1 минуту:
<img itemprop=image src=/images/2017-03/ansible-role-zsh-demo.gif></p></p><footer><a href=https://blog.popstas.ru/blog/2017/03/09/ansible-role-zsh-powerlevel9k-fzf-syntax-autosuggestions/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>08.03.2017, 01:00
- 3 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2017/03/08/develop-ansible-roles-with-molecule-and-gitlab-ci/>Мой процесс написания ansible роли с Molecule и Gitlab CI</a></div></header><p><p>Опишу процесс, к которому я пришел на данный момент.</p><p>TODO: concurrent
TODO: несколько дистрибов</p><h4 id=особенности>Особенности</h4><ul><li>Стремление не писать роли</li><li>Постепенное ужесточение требований при написании, от &ldquo;Лишь бы прошло с 10 раза&rdquo; к &ldquo;Скорее всего Travis пройдет с первого раза&rdquo;</li><li>Тестирование на разных машинах</li></ul><img itemprop=image src=/images/2017-03/iterations.png></p><footer><a href=https://blog.popstas.ru/blog/2017/03/08/develop-ansible-roles-with-molecule-and-gitlab-ci/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>05.03.2017, 20:45
- 5 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2017/03/05/migrate-from-octopress-to-hugo/>Перенос блога с Octopress на Hugo</a></div></header><p><p>Эта статья первая на новом движке.</p><h4 id=зачем>Зачем:</h4><ul><li>Не зависеть от ruby</li><li>быстрее</li><li>просто интересно</li></ul><img itemprop=image src=/images/2017-03/octopress-to-hugo.png></p><footer><a href=https://blog.popstas.ru/blog/2017/03/05/migrate-from-octopress-to-hugo/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>26.02.2017, 04:14
- 5 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2017/02/26/apt-cacher-ng-for-testing-ansible-roles-with-docker-and-gitlab-ci/>Настройка кеширующего прокси apt-cacher-ng для ускорения тестирования ansible ролей с Molecule, Gitlab CI и Docker</a></div></header><p><p>В <a href=/blog/2017/02/24/why-you-should-not-use-apt-mirror-for-ansible-tests-in-docker/>предыдущей статье</a> я настраивал <code>apt-mirror</code> для тех же целей. У того способа нашлось несколько недостатков.</p><p>В статье ниже описано, как решить ту же проблему, используя <code>apt-cacher-ng</code>.</p><p>Tl;dr: на этот раз все получилось, этот способ меня устроил.</p><img itemprop=image src=/images/2017-02/apt-cacher-ng.png></p><footer><a href=https://blog.popstas.ru/blog/2017/02/26/apt-cacher-ng-for-testing-ansible-roles-with-docker-and-gitlab-ci/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>24.02.2017, 17:39
- 5 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2017/02/24/why-you-should-not-use-apt-mirror-for-ansible-tests-in-docker/>Как я создал и отказался от локального репозитория apt-mirror для Ubuntu для ускорения тестирования ansible ролей</a></div></header><p><p>При тестировании плейбуков на чистой Ubuntu (а как же еще?) самые большие накладные расходы по времени (субъективно)
и уж точно самые большие по трафику уходят на установку пакетов из системного репозитория. Особенно это заметно, когда видишь, что один и тот же тест Travis CI прогоняет в 1.5 раза быстрее.</p><p>Ниже описано, как создать зеркало из <a href=http://mirror.yandex.ru/ubuntu>http://mirror.yandex.ru/ubuntu</a> и подружить его с Gitlab CI и molecule.</p><p>Tl;dr: не делайте локальный репозиторий через <code>apt-mirror</code> для мелких задач, не стоит оно того. Вместо этого нужно поднять кеширующий сервер через <a href=/blog/2017/02/26/apt-cacher-ng-for-testing-ansible-roles-with-docker-and-gitlab-ci/>apt-cacher-ng</a>.</p><img itemprop=image src=/images/2017-02/apt-mirror.png></p><footer><a href=https://blog.popstas.ru/blog/2017/02/24/why-you-should-not-use-apt-mirror-for-ansible-tests-in-docker/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>22.02.2017, 01:19
- 1 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2017/02/22/2017/02/22/git-extract-subproject-preserving-history/>Извлечение одной из папок в git репозитории в отдельный репозиторий с сохранением истории - git-extract-subproject</a></div></header><p><p>Занялся я тут распиливанием большого проекта (дерево ansible ролей) на отдельные репозитории.</p><h3 id=для-этого-надо>Для этого надо:</h3><ol><li>Извлечь директорию подпроекта в отдельный репозиторий</li><li>Удалить из проекта папку подпроекта</li><li>Добавить в большой проект зависимость от подпроекта</li></ol><p>Ниже написано, как сделать 1-й шаг одной командой через скрипт <code>git-extract-subproject</code>.</p><img itemprop=image src=/images/2017-02/git-extract-subproject.jpg></p><footer><a href=https://blog.popstas.ru/blog/2017/02/22/2017/02/22/git-extract-subproject-preserving-history/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>19.05.2016, 00:47
- 5 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2016/05/19/kapacitor-ansible-install-monit-comparsion/>Kapacitor: часть 1. Введение, сравнение с Monit, установка с Ansible и без, настройка</a></div></header><p><p>Несколько недель назад я начал разбираться с Kapacitor, попутно записывая свои действия. Конца разбирательствам было не видно, записей становилось все больше и накопилось на серию.</p><p>Речь пойдет о Kapacitor, последнеем слое из стека <a href=https://influxdata.com/get-started/what-is-the-tick-stack/>TICK</a> от InfluxData, набора программ для сбора, отображения и обработке метрик.</p><p>Tl;dr: думаю, что Kapacitor нужен только тем, кто уже использует InfluxDB для сбора метрик. С установкой могут быть проблемы, если руки кривые.</p><p>А также небольшое замечание о том, <a href=/blog/2016/05/19/kapacitor-ansible-install-monit-comparsion/#github-pull-request>как делать Pull request'ы из браузера за 2 минуты</a></p><img itemprop=image src=/images/2016-05/kapacitor.svg></p><footer><a href=https://blog.popstas.ru/blog/2016/05/19/kapacitor-ansible-install-monit-comparsion/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>11.04.2016, 05:01
- 2 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2016/04/11/bash-on-ubuntu-on-windows/>Bash on Ubuntu on Windows: первый блин</a></div></header><p><p>Итак, <a href=/blog/2016/04/07/windows-ubuntu-bash-insider-update-not-available/>дождался обновления</a> Windows, поставил в нее Ubuntu <a href=http://blog.zacorp.ru/main/kak-vklyuchit-podderzhku-ubuntu-v-windows-10/>по инструкции</a>, вот что было дальше:</p><p>Tl;dr: оно очень сырое, не работает почти ничего.</p><img itemprop=image src=/images/2016-04/windows-ubuntu-bash.png></p><footer><a href=https://blog.popstas.ru/blog/2016/04/11/bash-on-ubuntu-on-windows/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><article><header><p class=meta>07.04.2016, 00:26
- 2 мин читать</p><div class=entry-title><a href=https://blog.popstas.ru/blog/2016/04/07/windows-ubuntu-bash-insider-update-not-available/>Windows 10 build 14316 со встроенной Ubuntu и bash через программу Microsoft Insider Preview доступна не всем</a></div></header><p><p>Все конечно слышали, что Microsoft и Canonical сговорились и встроили в винду линукс. Так вот, его пока еще нельзя потрогать.</p><p>UPD 11.04.2016: сборка 14316 дошла до меня, смотрите инструкцию по настройке.</p><ul><li><a href=https://github.com/Microsoft/CommandLine-Documentation/issues/5>issue про недоступность сборки 14316</a></li><li><a href=http://blog.zacorp.ru/main/kak-vklyuchit-podderzhku-ubuntu-v-windows-10/>Инструкция по обновлению на русском</a></li></ul></p><footer><a href=https://blog.popstas.ru/blog/2016/04/07/windows-ubuntu-bash-insider-update-not-available/ class=full-article rel=nofollow>Читать &rarr;</a></footer></article><div class=pagination><a href=/ aria-label=First class=label-pagination><i class="fa fa-angle-double-left fa-lg"></i></a><a href=/page/3/ aria-label=Previous class=label-pagination><i class="fa fa-angle-left fa-lg"></i></a><a href=/ class=label-pagination>1</a>
<a href=/page/2/ class=label-pagination>2</a>
<a href=/page/3/ class=label-pagination>3</a>
<a href=/page/4/ class=label-pagination>4</a>
<a href=/page/5/ class=label-pagination>5</a>
<a href=/page/6/ class=label-pagination>6</a>
<a href=/page/5/ aria-label=Next class=label-pagination><i class="fa fa-angle-right fa-lg"></i></a><a href=/page/6/ aria-label=Last><i class="fa fa-angle-double-right fa-lg"></i></a></div></div><aside class="sidebar thirds"><section class="first odd"><p></p></section><ul class=sidebar-nav><li class=sidebar-nav-item><a target=_blank href=https://github.com/popstas/ title=https://github.com/popstas/><i class="fa fa-github fa-3x"></i></a><a target=_blank href=https://twitter.com/popstas/ title=https://twitter.com/popstas/><i class="fa fa-twitter fa-3x"></i></a><a target=_blank href="tg://resolve?domain=popstas" title=popstas><i class="fa fa-telegram fa-3x"></i></a><a target=_blank href=mailto:popstas@gmail.com title=popstas@gmail.com><i class="fa fa-at fa-3x"></i></a></li></ul><section class=even><div class=sidebar-title>Последние посты:</div><ul id=recent_posts><li class=post><a href=/navigator/>Навигатор</a></li><li class=post><a href=/blog/2020/04/14/yandex-dialogs/>Яндекс.Диалоги: как я делал навыки для Алисы и инструменты для разработки</a></li><li class=post><a href=/blog/2020/04/13/yandex-dialogs-whatis/>Навык для Алисы "Вторая память": технические особенности</a></li><li class=post><a href=/blog/2020/04/13/npm-version/>NPM version: версионирование, история изменений, деплой</a></li></ul></section></aside></div></div><footer role=contentinfo><p>Copyright &copy; 2015-2020 Stanislav Popov -
<span class=credit>Powered by <a target=_blank href=https://gohugo.io>Hugo</a> and <a target=_blank href=https://github.com/parsiya/hugo-octopress/>Hugo-Octopress</a> theme.</p></footer><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WPJWVXB');</script><script src=/js/custom.js></script><script type=text/javascript>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(51681281,"init",{id:51681281,clickmap:true,trackLinks:true,accurateTrackBounce:true,webvisor:true});</script><noscript><div><img src=https://mc.yandex.ru/watch/51681281 style=position:absolute;left:-9999px alt></div></noscript></body></html>
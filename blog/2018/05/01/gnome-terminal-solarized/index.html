<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  

  
  <title>Настройка Gnome Terminal: Solarized Dark и быстрый выбор профиля</title>

  
  
  <link rel="stylesheet" href="https://blog.popstas.ru/css/hugo-octopress.css">

  
  
    <link rel="stylesheet" href="https://blog.popstas.ru/css/custom.css">
  

  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

  
  <link href="https://blog.popstas.ru/favicon.png" rel="icon">

  
  
  

  

  <meta name="description" content="">
  <meta name="keywords" content="">

  <meta name="author" content="Stanislav Popov">

  
  <meta name="generator" content="Hugo 0.51" />

  
  

</head>
<body>


<header role="banner"><hgroup>
  
  <h1><a href="https://blog.popstas.ru/">Popstas</a></h1>
    <h2>Записки о Linux</h2>
</hgroup></header>


<nav role="navigation">

<ul class="main-navigation">
  
  
</ul>


<ul class="subscription">
  
    
        <a href="http://feeds.feedburner.com/popstas" target="_blank" type="application/rss+xml" title="RSS"><i class="fa fa-rss-square fa-lg"></i></a>
    
  

</ul>


</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry" role="article">

        
        

<header>
    <p class="meta">1 May 2018, 08:20
         - 3 мин читать 

        
    </p>
    <h1 class="entry-title">
         Настройка Gnome Terminal: Solarized Dark и быстрый выбор профиля 
    </h1>
</header>


        <div class="entry-content">
          
          
          
          <p>Ниже будет описана настройка Solarized Dark, быстрого открытия терминала с нужным профилем и история бага во встроенной схеме.</p>

<h2 id="настройка-цветовой-схемы">Настройка цветовой схемы</h2>

<h4 id="параметры-цвета">Параметры - Цвета:</h4>

<ul>
<li>Цвет текста и фона: Solarized темная</li>
<li>Палитра: Solarized</li>
<li>Я еще убираю Использовать настройки прозрачности из системной темы</li>
</ul>

<p>Не повторяйте моей ошибки! Я несколько лет не обращал внимание на схему палитры, не знал, что в gnome-terminal цветовая схема состоит из двух схем и выбирал только первую, из-за этого потерял много времени (об этом ниже).</p>

<h2 id="быстрый-выбор-профиля-через-fzf">Быстрый выбор профиля через fzf</h2>

<p>Gist - <a href="https://gist.github.com/popstas/deecce960a44368cff7da33f6c8583a8" target="_blank">https://gist.github.com/popstas/deecce960a44368cff7da33f6c8583a8</a></p>

<pre><code>list_terms (){
    uuids=$(gsettings get org.gnome.Terminal.ProfilesList list | tr -d \' | tr -d \[ | tr -d \] | tr -d ,)
    for uuid in $(echo $uuids); do
        gsettings get org.gnome.Terminal.Legacy.Profile:/org/gnome/terminal/legacy/profiles:/:${uuid}/ visible-name | tr -d \'
    done
}

select_term (){
    selected=&quot;$(list_terms | sort -n | fzf)&quot;
    if [ -n &quot;$selected&quot; ]; then
        gnome-terminal --window-with-profile=&quot;$selected&quot;
    fi
}

zle -N select_term
bindkey ^n select_term
</code></pre>

<p>Этот код можно вставить в ваш ~/.zshrc, после этого по Ctrl+N будет открываться фильтр профилей, после выбора будет открываться окно терминала. Если предпочитаете во вкладке, надо заменить <code>--window-with-profile</code> на <code>--tab-with-profile</code>.</p>

<h2 id="как-я-2-часа-заводил-баг-которого-не-было">Как я 2 часа заводил баг, которого не было</h2>

<p>Все, что ниже, не относится к делу и появилось в результате моей невнимательности.</p>

<p>Первым делом я меняю в терминале шрифт на <a href="https://github.com/powerline/fonts" target="_blank">Powerline Fonts</a> и цвета на <a href="http://ethanschoonover.com/solarized" target="_blank">Solarized Dark</a>. Шрифты довольно маргинальные, поэтому тут нет вопросов: скачал поставил, шрифты универсальные и встают на любой терминал. С цветовыми схемами сложнее, тут они у каждого свои, зато Solarized - самая популярная схема, что упрощает задачу. В Gnome Terminal она уже есть, я ее радостно поставил и обнаружил, что она неправильная, цвета не те.</p>

<p>Решается это просто, если вы еще не успели наплодить профилей, качаем тру схему и ставим:</p>

<pre><code>git clone https://github.com/Anthony25/gnome-terminal-colors-solarized.git
cd gnome-terminal-colors-solarized
./install.sh -s dark
</code></pre>

<p>Очень странно, что этого нет из коробки, я, избалованный PR на Github, подумал, что наверное прогресс уже дошел до Gnome, нашел репозиторий gnome-terminal на github и даже <a href="https://github.com/GNOME/gnome-terminal/pull/6" target="_blank">PR про это</a>, но оказалось, что у Gnome там работает робот, который закрывает все запросы и посылает на gitlab, где ведется разработка. Я пошел туда и там gnome-terminal не нашел. Тогда я узнал, что как раз сейчас идет переезд с Bugzilla на Gitlab, и до этого проекта еще не дошли. Ок, пошел в Bugzilla создавать баг и наткнулся на интересный FAQ, который надо прочитать перед созданием ишью - <a href="https://wiki.gnome.org/Apps/Terminal/FAQ" target="_blank">https://wiki.gnome.org/Apps/Terminal/FAQ</a>. Из него я узнал то, что давно (целый день) хотел узнать: как получить список профилей. Через 20 минут у меня появился выбор терминала по хоткею (зависит от gsettings и fzf).</p>

<p>После этого продолжил заводить ишью, прочитал все гайды, после чего наткнулся на очередной посыл подальше:</p>

<blockquote>
<p>If you’re a developer of GNOME Terminal, VTE, or GNOME in general, you can file the bug in GNOME’s bugzilla. In all other cases, you should file the bug against your Linux distribution’s bug tracker; see here for a list of distribution bug trackers. The distribution bug triagers will then gather all the necessary information and confirmation before forwarding the bug to our bugzilla, if necessary.</p>
</blockquote>

<p>Ок… Я уже слишком далеко зашел, чтобы останавливаться ) Пошел на <a href="https://bugs.launchpad.net/ubuntu" target="_blank">https://bugs.launchpad.net/ubuntu</a>, там все свалено в кучу и инструкция по заведению бага намного больше, чем на gnome-terminal, странный способ Gnome выбрал, чтобы облегчить себе жить. Ладно, нашел, что подобные баги надо заводить так: ubuntu-bug gnome-terminal.</p>

<p>В итоге я завел баг - <a href="https://bugs.launchpad.net/ubuntu/+source/gnome-terminal/+bug/1768178" target="_blank">https://bugs.launchpad.net/ubuntu/+source/gnome-terminal/+bug/1768178</a>, <del>возможно, я что-то не понимаю или плохо искал, но неправильная схема добавлена в терминал в начале 2014, и я не нашел ни одного бага про solarized ни на gnome, ни на launchpad</del>. Конечно, я что-то не понимал, никакого глюка не было, спасибо Egmont Koblinger, который попросил меня внимательно все перепроверить.</p>

<p>Статья из <a href="/blog/2018/04/30/windows-ubuntu-18.04-migrate/">цикла &ldquo;Переезд на Ubuntu 18.04&rdquo;</a>.</p>
        </div>
        

<footer>
  <p class="meta">
    
    <time>1 May 2018, 08:20</time>
    
      <span class="categories">
        Теги:
        
          <a class="category" href="https://blog.popstas.ru/tags/ubuntu-desktop">ubuntu desktop</a>  <a class="category" href="https://blog.popstas.ru/tags/gnome">gnome</a>  <a class="category" href="https://blog.popstas.ru/tags/18.04">18.04</a>  
    
    </span>
  </p>

  
  <div class="sharing">
  
  <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
    <a href="https://www.addtoany.com/share"></a>
    <a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_google_plus"></a><a class="a2a_button_vk"></a><a class="a2a_button_pocket"></a>
  </div>
  <script>
    var a2a_config = a2a_config || {};
    a2a_config.locale = "ru";
    a2a_config.color_main = "undefined";
    a2a_config.color_border = "undefined";
    a2a_config.color_link_text = "undefined";
    a2a_config.color_link_text_hover = "undefined";
    a2a_config.color_bg = "undefined";
    a2a_config.color_arrow = "undefined";
    a2a_config.color_arrow_hover = "undefined";
    a2a_config.prioritize = ["facebook", "twitter", "google_plus", "pocket", "vk"];
  </script>
  <script async src="https://static.addtoany.com/menu/page.js"></script>
  
</div>

  

  

  <p class="meta">
    
        <a class="basic-alignment left" href="https://blog.popstas.ru/blog/2018/05/01/alt-shift-tab-in-ubuntu/" title="Переключение окон назад по Alt&#43;Shift&#43;Tab в Ubuntu 18.04">Переключение окон назад по Alt&#43;Shift&#43;Tab в Ubuntu 18.04</a>
    

    
      <a class="basic-alignment right" href="https://blog.popstas.ru/blog/2018/11/07/3d-printed-expandable-tea-box/" title="Полочки для чая на 3d принтере">Полочки для чая на 3d принтере</a>
    
  </p>
      <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    
    

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'popstas';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  
</footer>

      </article>
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>



  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      <a target="_blank" href="https://github.com/popstas/" title="https://github.com/popstas/"><i class="fa fa-github fa-3x"></i></a>
      
      
      <a target="_blank" href="https://twitter.com/popstas/" title="https://twitter.com/popstas/"><i class="fa fa-twitter fa-3x"></i></a>
       
      
      
      
      
      
      

    
    
    </li>
  </ul>

  

  

  
  
  
    
      <section class="even">
        <h4>Последние посты:</h4>
        <ul id="recent_posts">
          
            <li class="post">
              <a href="/blog/2018/12/16/3d-printed-coffee-cap/">Крышка-дозатор для насыпания кофе на 3d принтере</a>
            </li>
          
            <li class="post">
              <a href="/blog/2018/11/07/3d-printed-expandable-tea-box/">Полочки для чая на 3d принтере</a>
            </li>
          
            <li class="post">
              <a href="/blog/2018/05/01/gnome-terminal-solarized/">Настройка Gnome Terminal: Solarized Dark и быстрый выбор профиля</a>
            </li>
          
            <li class="post">
              <a href="/blog/2018/05/01/alt-shift-tab-in-ubuntu/">Переключение окон назад по Alt&#43;Shift&#43;Tab в Ubuntu 18.04</a>
            </li>
          
            <li class="post">
              <a href="/blog/2018/05/01/gxneur-punto-switcher-ubuntu/">Настройка gxneur в Ubuntu 18.04</a>
            </li>
          
        </ul>
      </section>
    
  

  <section class="even twitter-feed">
  <a class="twitter-timeline"
	 data-dnt="true" href="https://twitter.com/popstas" 
	 data-chrome="noborders transparent"
     data-widget-id="691684611357806592">
     
     Tweets by @popstas
  </a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>


  <section class="even">
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  <a href="https://github.com/popstas">@popstas</a> on GitHub
  <script src="/js/jquery.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/js/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'popstas',
            count:  10 ,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/js/github.js" type="text/javascript"> </script>
</section>
</aside>

  </div>
</div>

<footer role="contentinfo">
  <p>Copyright &copy; 2015-2018 Stanislav Popov -
  <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
</p>

</footer>


<script>
  var _gaq=[['_setAccount','UA-70438594-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

